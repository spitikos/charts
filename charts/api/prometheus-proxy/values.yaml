replicaCount: 1
image:
  repository: ghcr.io/spitikos/api
  pullPolicy: Always
  tag: 796ce9ffaf89f02c0d8abf2e42567acef3c3b455
command:
  - /prometheus-proxy
service:
  type: ClusterIP
  port: 50051
  containerPort: 50051
  portName: http-grpc
ingress:
  enabled: true
  host: api.spitikos.dev
  path: /prometheus-proxy

# Configuration for the prometheus_proxy.yaml file
config:
  prometheus_url: https://prometheus.spitikos.dev
  port: 50051
  query_range_step_seconds: 15
  stream_interval_seconds: 1

# Mount the ConfigMap as a volume
extraVolumes:
  - name: config-volume
    configMap:
      # This name is generated by the configmap.yaml template
      name: {{ .Release.Name }}-config

# Mount the volume into the container at the specified path
extraVolumeMounts:
  - name: config-volume
    mountPath: /config/prometheus_proxy.yaml
    subPath: prometheus_proxy.yaml
